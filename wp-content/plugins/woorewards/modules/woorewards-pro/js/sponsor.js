jQuery(function(a){a(".lws_woorewards_sponsorship_widget").on("click",".lws_woorewards_sponsorship_form .lws_woorewards_sponsorship_submit",function(){var f=a(this).closest(".lws_woorewards_sponsorship_widget");var d=f.find(".lws_woorewards_sponsorship_feedback").show();d.html("Sending the sponsorship request ...");var e=f.find(".lws_woorewards_sponsorship_submit");var c=[];c[0]=e.css("background-color");c[1]=e.css("color");e.prop("disabled",true).css({"background-color":"#aaa",color:"#fff"});var b=f.find("input.lws_woorewards_sponsorship_host_field");b=(b.length>0?b.val():"");a.getJSON(lws_ajax_url,{action:"lws_woorewards_add_sponsorship",sponsorship_nonce:f.find("input.lws_woorewards_sponsorship_nonce").val(),sponsor_email:b,sponsored_email:f.find("input.lws_woorewards_sponsorship_field").val()},function(g){var h=f.find(".lws_woorewards_sponsorship_feedback");h.removeClass("lws_woorewards_sponsorship_error").removeClass("lws_woorewards_sponsorship_succeed");if(!g){h.addClass("lws_woorewards_sponsorship_error").html("Server error").show()}if(g.error!=undefined){h.addClass("lws_woorewards_sponsorship_error").html(g.error).show()}if(g.message!=undefined){h.addClass("lws_woorewards_sponsorship_succeed").html(g.message).show()}if(g.redirect!=undefined&&g.redirect.length>0){document.location=g.redirect}}).fail(function(h,i,g){console.log("["+h.status+"] "+h.responseText);d.html("An internal server error occured. Please retry later.").show()}).done(function(){e.prop("disabled",false).css({"background-color":c[0],color:c[1]})})})});