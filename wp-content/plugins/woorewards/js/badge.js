(function(b){b.fn.rotate=function(n){var j=b(this),l,m,p=0;l=["-Webkit-","-Moz-","-O-","-ms-",""];m=b.extend({startDeg:false,endDeg:360,duration:1,count:1,easing:"linear",animate:{},forceJS:false},n);function o(c){var d=false,e=document.createElement("div").style;b.each(l,function(f,g){if(e[g.replace(/\-/g,"")+c]===""){d=true}});return d}function a(c,d){var e={};if(!o.transform){return e}b.each(l,function(f,g){e[g.toLowerCase()+c]=d||""});return e}function k(c){var f,g,d,e;if(o.transform){return""}f=c>=0?Math.PI*c/180:Math.PI*(360+c)/180;g=Math.cos(f);d=Math.sin(f);e="M11="+g+",M12="+(-d)+",M21="+d+",M22="+g+',SizingMethod="auto expand"';return"progid:DXImageTransform.Microsoft.Matrix("+e+")"}o.transform=o("Transform");o.transition=o("Transition");m.endDeg*=m.count;m.duration*=m.count;if(o.transition&&!m.forceJS){if((/Firefox/).test(navigator.userAgent)){p=(!n||!n.animate)&&(m.startDeg===false||m.startDeg>=0)?0:25}j.queue(function(c){if(m.startDeg!==false){j.css(a("transform","rotate("+m.startDeg+"deg)"))}setTimeout(function(){j.css(a("transition","all "+m.duration+"s "+m.easing)).css(a("transform","rotate("+m.endDeg+"deg)")).css(m.animate)},p);setTimeout(function(){j.css(a("transition"));if(!m.persist){j.css(a("transform"))}c()},(m.duration*1000)-p)})}else{if(m.startDeg===false){m.startDeg=j.data("rotated")||0}m.animate.perc=100;j.animate(m.animate,{duration:m.duration*1000,easing:b.easing[m.easing]?m.easing:"",step:function(e,c){var d;if(c.prop==="perc"){d=m.startDeg+(m.endDeg-m.startDeg)*e/100;j.css(a("transform","rotate("+d+"deg)")).css("filter",k(d))}},complete:function(){if(m.persist){while(m.endDeg>=360){m.endDeg-=360}}else{m.endDeg=0;j.css(a("transform"))}j.css("perc",0).data("rotated",m.endDeg)}})}return j};b.widget("lws.lws_badge",{options:{imageUrl:"",bgUrl:"",iconClass:"lws-icon-checkmark",optClass:"",title:"",text:""},_create:function(){this._getDataOptions();this._createStructure();this._animateBadge()},_bind:function(a,d){return function(){return a.apply(d,arguments)}},_getDataOptions:function(){if(this.element.data("imageurl")!=undefined){this.options.imageUrl=this.element.data("imageurl")}if(this.element.data("bgurl")!=undefined){this.options.bgUrl=this.element.data("bgurl")}if(this.element.data("optclass")!=undefined){this.options.optClass=this.element.data("optclass")}if(this.element.data("iconclass")!=undefined){this.options.iconClass=this.element.data("iconclass")}if(this.element.data("title")!=undefined){this.options.title=this.element.data("title")}if(this.element.data("text")!=undefined){this.options.text=this.element.data("text")}else{if(this.element.html()!=""){this.options.text=this.element.html()}}},_createStructure:function(){var e="<img src='"+this.options.bgUrl+"' style='max-width:200px;max-height:200px;' />";if(this.options.imageUrl!=""){var a="";var f="<img class='lws-badge-image' src='"+this.options.imageUrl+"'/>"}else{var a="lws-badge-icon "+this.options.iconClass;var f=""}this.container=b(document.body);this.globalDelay=(b(".lws-badge-wrapper").length)*7000;b("<div>",{"class":"lwss_selectable lws-badge-wrapper "+this.options.optClass,css:{width:"0px",height:"0px",position:"fixed"}}).append(b("<div>",{"class":"lwss_selectable lws-badge-img-container"}).append(b("<div>",{"class":"lws-badge-star",css:{opacity:"0"},html:e})).append(b("<div>",{"class":"lwss_selectable lws-badge-img "+a,css:{opacity:"0"},html:f}))).append(b("<div>",{"class":"lwss_selectable lws-badge-content-container"}).append(b("<div>",{"class":"lwss_selectable lws-badge-content-title ",html:this.options.title})).append(b("<div>",{"class":"lwss_selectable lws-badge-content-sep"})).append(b("<div>",{"class":"lwss_selectable lws-badge-content-text",html:this.options.text}))).appendTo(this.container);this.badge=this.container.find(".lws-badge-wrapper");this.badge.css("left",(b(window).width()/2));this.badge.css("top",(b(window).height()/2))},_animateBadge:function(){this.badge.delay(this.globalDelay).delay("500").animate({left:"-=50",top:"-=50",width:"100",height:"100"},500).delay("500").animate({left:"-=200",width:"500"},500);this.badge.find(".lws-badge-img").delay(this.globalDelay).delay("1000").animate({opacity:1},1000);this.badge.find(".lws-badge-star").delay(this.globalDelay).delay("1500").animate({opacity:0.5},500).rotate({count:1,duration:10});this.badge.delay("4000").animate({opacity:0},1000).queue(function(){b(this).remove()})}})})(jQuery);jQuery(function(b){b(".lws_wre_badge").lws_badge()});