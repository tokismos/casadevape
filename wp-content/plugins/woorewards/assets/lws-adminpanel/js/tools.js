(function(b){b.fn.lwsReadForm=function(){var a={};function d(f,c){if(f.endsWith("[]")){f=f.substr(0,f.length-2);if(a[f]!=undefined){a[f].push(c)}else{a[f]=[c]}}else{a[f]=c}}b(this).find("span[data-name]").each(function(g,c){var h=b(c).data("name");if(h!=undefined&&h.length>0){d(h,b(c).html())}});b(this).find("input:not([type='radio'], [type='checkbox']), select, textarea").each(function(c,i){var h=b(i).attr("name");if(h!=undefined&&h.length>0){var j=b(i).prop("tagName");if(j=="select"){d(h,b(i).find("option:selected").val())}else{d(h,b(i).val())}}});b(this).find("input[type='radio']").each(function(c,h){var g=b(h).attr("name");if(b(h).prop("checked")&&g!=undefined&&g.length>0){d(g,b(h).val())}});b(this).find("input[type='checkbox']").each(function(c,h){var g=b(h).attr("name");if(g!=undefined&&g.length>0){d(g,(b(h).prop("checked"))?b(h).val():"")}});return a};b.fn.lwsWriteForm=function(f,h,g){function a(e,c,d){if(d!=undefined){e.data("value",((typeof c)=="string"?c:lwsBase64.fromObj(c))).trigger("change")}else{e.val(c).trigger("change")}}b(this).find("input:not([type='radio'], [type='checkbox']), select, textarea").each(function(d,j){var c=b(j).data("lw_name");var e=(c!=undefined?c:b(j).attr("name"));if(e!=undefined&&e.length>0){if(f[e]!=undefined){a(b(j),b("<div>").html(f[e]).text(),c)}else{if(h===true){a(b(j),"",c)}}}else{if(g===true){a(b(j),"",c)}}});b(this).find("span[data-name]").each(function(d,c){var e=b(c).data("name");if(e!=undefined&&e.length>0){if(f[e]!=undefined){b(c).html(f[e]).trigger("change")}else{if(h===true){b(c).text("").trigger("change")}}}else{if(g===true){b(c).text("").trigger("change")}}});b(this).find("input[type='radio']").each(function(c,e){var d=b(e).attr("name");if((d!=undefined&&d.length>0)||g===true){if(f[d]!=undefined||g===true||h===true){b(e).prop("checked",false)}}});b(this).find("input[type='radio']").each(function(c,e){var d=b(e).attr("name");if(d!=undefined&&d.length>0){if(f[d]!=undefined&&f[d]==b(e).val()){b(e).prop("checked",true).trigger("change")}}});b(this).find("input[type='checkbox']").each(function(c,e){var d=b(e).attr("name");if(d!=undefined&&d.length>0){if(f[d]!=undefined){b(e).prop("checked",f[d]==b(e).val()).trigger("change")}else{if(h===true){b(e).prop("checked",false).trigger("change")}}}else{if(g===true){b(e).prop("checked",false).trigger("change")}}});return b(this)};b.fn.lwsIsDark=function(f){if(typeof(f)==="undefined"){f="background-color"}var a=this.css(f).match(/\d+/g);if(a!=null){var e=(0.2126*a[0])+(0.7152*a[1])+(0.0722*a[2]);return(e<100)}else{return false}};b.fn.lwsMatchPattern=function(){var a=true;function d(i,h){var j=b(h);var c=new RegExp(j.data("pattern"),j.data("pattern-flags"));if(!c.test(j.val())){a=false;if(j.data("pattern-title")!=undefined&&j.data("pattern-title").length>0){alert(j.data("pattern-title"))}return false}}if(b(this).prop("tagName").toUpperCase()=="INPUT"){if(b(this).data("pattern")!=undefined){d(0,this)}}else{b(this).find("input[data-pattern]").each(d)}return a}})(jQuery);