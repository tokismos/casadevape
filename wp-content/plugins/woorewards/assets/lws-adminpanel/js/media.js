jQuery(function(f){function e(c,a){var b=c.url;if(typeof c.sizes!="undefined"&&c.sizes[a]){b=c.sizes[a].url}return b}function d(j,c,a,b){var i="";if(c=="image"){i="<img src='"+e(j,a)+"'";i+=" alt='"+(typeof j.alt!="undefined"?j.alt:"")+"'";i+=" title='"+(typeof j.title!="undefined"?j.title:"")+"'";i+=" class='attachment-"+b+" size-"+b+"'>"}return i}f(".lws_adminpanel_btn_add_media").click(function(a){a.preventDefault();var c=f(a.target);if(c.data("gk_frame")!=undefined){c.data("gk_frame").open();return}var b=wp.media({title:c.data("title"),multiple:false,library:{type:c.data("type")},button:{text:c.data("pick")}});b.on("select",function(){var m=c.data("gk_frame").state().get("selection");if(!m){return}var k=m.first();var n=c.closest(".lws_media_master");var l=n.find(".lws_adminpanel_btn_add_media");n.find(".lws-adm-media").show().html(d(k.attributes,c.data("type"),c.data("image-size"),c.data("class-size")));n.find(".lws_adminpanel_input_media_url").val(e(k.attributes,c.data("image-size")));n.find(".lws_adminpanel_input_media_id").val(k.attributes.id).trigger("change");l.removeClass("lws-media-add").addClass("lws-media-edit").val(l.data("edit"));n.find(".lws_adminpanel_btn_del_media").show()});c.data("gk_frame",b);c.data("gk_frame").open()});f(".lws_adminpanel_btn_del_media").click(function(b){b.preventDefault();var c=f(this).closest(".lws_media_master");var a=c.find(".lws_adminpanel_btn_add_media");c.find(".lws-adm-media").html("").hide();a.removeClass("lws-media-edit").addClass("lws-media-add").val(a.data("add"));c.find(".lws_adminpanel_btn_del_media").hide();c.find(".lws_adminpanel_input_media_url").val("");c.find(".lws_adminpanel_input_media_id").val("").trigger("change");f(this).hide()});f(".lws_adminpanel_input_media_url").change(function(){var a=f(this).val();var c=f(this).closest(".lws_media_master");if(a!=undefined&&a!=""){var b=c.find(".lws_adminpanel_btn_add_media");c.find(".lws-adm-media").html(d({url:a},b.data("type"),b.data("image-size"),b.data("class-size")));c.find(".lws-adm-media").show();b.removeClass("lws-media-add").addClass("lws-media-edit").val(b.data("edit"));c.find(".lws_adminpanel_btn_del_media").show()}else{c.find(".lws_adminpanel_btn_del_media").trigger("click")}})});