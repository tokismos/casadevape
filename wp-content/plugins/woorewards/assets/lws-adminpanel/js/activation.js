jQuery(function(b){b('.lws-adminpanel-activation-form input[type="submit"].lws-adm-btn').click(function(i){var j=b(this).closest(".lws-adminpanel-activation-form");var l=b("#lws_adm_install_pro_cb").prop("checked");if(j.length>0){var a=j.closest(".lws-activation");var k=j.find("input[type='submit']");k.addClass("lw_waiting_button").prop("disabled",true);var h={};j.find("input[type!='submit']").each(function(){h[b(this).attr("name")]=b(this).val()});b.post(lwsActivationUrl,h,function(d){a.children("div").hide();if(0!=d){var c=a.find(d.ok?".lws-activation-success":".lws-activation-error");c.show();if(d.html!=undefined){c.append(d.html)}if(d.redirect!=undefined&&l&&d.redirect.length>0){document.location=d.redirect}}else{a.find(".lws-activation-error").show().append("<p>A problem occured on the server, please retry later.</p>")}},"json").fail(function(d,c,e){a.children("div").hide();a.find(".lws-activation-error").show().append("<p>Connection problem:<br/>"+c+", "+e+"</p>")}).done(function(){k.removeClass("lw_waiting_button").prop("disabled",false)});i.preventDefault();return false}});b(".lws-second-activation-method").click(function(){var a=b(this).parent().next("div");if(a.is(":visible")){a.slideUp()}else{a.slideDown()}})});