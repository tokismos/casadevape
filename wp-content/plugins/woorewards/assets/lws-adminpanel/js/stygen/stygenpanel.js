(function(b){b.widget("lws.lws_styling_panel",{options:{stygen:undefined},_create:function(){this.stygen=this.options.stygen;this.element.addClass("lwss-css-inputs");this.myInput=b("<input>").addClass("lwss-merge-css").attr("type","hidden").appendTo(this.element);this.myMainPanel=b("<div>").addClass("lwss-sp-main").appendTo(this.element);this.activeClass="";this._addEventPanel();this._addColorPanel();this._addTabsPanel();this._setTab("Text")},_bind:function(a,d){return function(){return a.apply(d,arguments)}},_addEventPanel:function(){this.myEventPanel=b("<div>").addClass("lwss-sp lwss-sp-event").appendTo(this.myMainPanel);myEventSelector=b("<div>").addClass("lwss-sp-event-icon lws-icon-lw_arrow").appendTo(this.myEventPanel);mySelectorLabel=b("<span>").html("Events").appendTo(myEventSelector);eventsDiv=b("<div>").addClass("lwss-sp-div lwss-sp-events-div").appendTo(this.myEventPanel);idleEvent=b("<div>").addClass("lwss-sp-events lws-icon-lw_idle").data("Event","idle").appendTo(eventsDiv);idleLabel=b("<div>").addClass("lwss-sp-events-label").html("Idle").appendTo(idleEvent);overEvent=b("<div>").addClass("lwss-sp-events lws-icon-lw_over").data("Event","hover").appendTo(eventsDiv);overLabel=b("<div>").addClass("lwss-sp-events-label").html("Over").appendTo(overEvent);clickEvent=b("<div>").addClass("lwss-sp-events lws-icon-lw_click").data("Event","focus").appendTo(eventsDiv);clickLabel=b("<div>").addClass("lwss-sp-events-label").html("Focus").appendTo(clickEvent);var a=this;b(".lwss-sp-events").click(function(){a.setEvent(b(this).data("Event"))})},_addColorPanel:function(){this.myColorPanel=b("<div>").addClass("lwss-sp-color").appendTo(this.myMainPanel);myColorSelector=b("<div>").addClass("lwss-sp-color-selector lws-icon-lw_dropper").appendTo(this.myColorPanel);mySelectorLabel=b("<span>").html("Colors").appendTo(myColorSelector);colorsDiv=b("<div>").addClass("lwss-sp-div lwss-sp-colors-div").appendTo(this.myColorPanel);myColor=b("<div>").appendTo(colorsDiv).lwss_colorButton({icon:"lws-icon-lw_text",showvalue:false,property:"color"});myBackgroundColor=b("<div>").appendTo(colorsDiv).lwss_colorButton({icon:"lws-icon-lw_inkpot",showvalue:false,property:"background-color"})},_addTabsPanel:function(){this.myTabsPanel=b("<div>").addClass("lwss-sp-tabs-panel").appendTo(this.myMainPanel);this.myTabsSelectors=b("<ul>").addClass("lwss-sp-tselectors").appendTo(this.myTabsPanel);this.myTabs=b("<div>").addClass("lwss-sp-tabs").appendTo(this.myTabsPanel);this._addTextTab();this._addDisplayTab();this._addBorderTab();this._addContentTab();this.myTabsSelectors.mouseleave(this._bind(this._tSelLeave,this))},_addTextTab:function(){myTextSelector=b("<li>").addClass("lwss-sp-tselectors-text lwss_tselector lws-icon-lw_text").data("Tab","Text").appendTo(this.myTabsSelectors);mySelectorLabel=b("<span>").html("Text").appendTo(myTextSelector);myTextTab=b("<div>").addClass("lwss-sp-tabs-text lwss_sp_tab").data("Tab","Text").appendTo(this.myTabs);myTextSelector.mouseenter(this._bind(this._tSelEnter,this));var a=this;myTextSelector.click(function(){a._setTab(b(this).data("Tab"))});myFirstLine=b("<div>").addClass("lwss-sp-tab-line").appendTo(myTextTab);myFont=b("<div>").appendTo(myFirstLine).lwss_fontselect({icon:"lws-icon-font",cssColor:"lwss-ttext-color"});myFontSize=b("<div>").appendTo(myFirstLine).lwss_size({icon:"lws-icon-text-height",cssColor:"lwss-ttext-color",property:"font-size"});myLineHeight=b("<div>").appendTo(myFirstLine).lwss_size({icon:"lws-icon-lw_line_height",cssColor:"lwss-ttext-color",property:"line-height"});selValues=["none","left","center","right","justify","inherit"];myTextAlign=b("<div>").appendTo(myFirstLine).lwss_select({icon:"lws-icon-paragraph-left",cssColor:"lwss-ttext-color",property:"text-align",values:selValues});mySecondLine=b("<div>").addClass("lwss-sp-tab-line").appendTo(myTextTab);selValues=["none","uppercase","capitalize","lowercase","initial","inherit"];myTextTransform=b("<div>").appendTo(mySecondLine).lwss_select({icon:"lws-icon-font-size",cssColor:"lwss-ttext-color",property:"text-transform",values:selValues});selValues=["normal","italic","oblique","initial","inherit"];myTextItalic=b("<div>").appendTo(mySecondLine).lwss_select({icon:"lws-icon-italic",cssColor:"lwss-ttext-color",property:"font-style",values:selValues});selValues=["none","underline","overline","line-through","initial","inherit"];myTextDecoration=b("<div>").appendTo(mySecondLine).lwss_select({icon:"lws-icon-underline",cssColor:"lwss-ttext-color",property:"text-decoration",values:selValues})},_addDisplayTab:function(){myDisplaySelector=b("<li>").addClass("lwss-sp-tselectors-display lwss_tselector lws-icon-eye").data("Tab","Display").appendTo(this.myTabsSelectors);mySelectorLabel=b("<span>").html("Display").appendTo(myDisplaySelector);myDisplayTab=b("<div>").addClass("lwss-sp-tabs-display lwss_sp_tab").data("Tab","Display").appendTo(this.myTabs);myDisplaySelector.mouseenter(this._bind(this._tSelEnter,this));var a=this;myDisplaySelector.click(function(){a._setTab(b(this).data("Tab"))});myFirstLine=b("<div>").addClass("lwss-sp-tab-line").appendTo(myDisplayTab);myMargin=b("<div>").appendTo(myFirstLine).lwss_4values({icon:"lws-icon-lw_margin",cssColor:"lwss-tdisplay-color",property:"margin"});myPosition=b("<div>").appendTo(myFirstLine).lwss_4values({icon:"lws-icon-enlarge",cssColor:"lwss-tdisplay-color",property:"position"});mySecondLine=b("<div>").addClass("lwss-sp-tab-line").appendTo(myDisplayTab);myPadding=b("<div>").appendTo(mySecondLine).lwss_4values({icon:"lws-icon-lw_padding",cssColor:"lwss-tdisplay-color",property:"padding"});myWidth=b("<div>").appendTo(mySecondLine).lwss_size({icon:"lws-icon-lw_width",cssColor:"lwss-tdisplay-color",property:"width"});myHeight=b("<div>").appendTo(mySecondLine).lwss_size({icon:"lws-icon-lw_height",cssColor:"lwss-tdisplay-color",property:"height"})},_addBorderTab:function(){myBorderSelector=b("<li>").addClass("lwss-sp-tselectors-border lwss_tselector lws-icon-lw_border").data("Tab","Border").appendTo(this.myTabsSelectors);mySelectorLabel=b("<span>").html("Border").appendTo(myBorderSelector);myBorderTab=b("<div>").addClass("lwss-sp-tabs-border lwss_sp_tab").data("Tab","Border").appendTo(this.myTabs);myBorderSelector.mouseenter(this._bind(this._tSelEnter,this));var d=this;myBorderSelector.click(function(){d._setTab(b(this).data("Tab"))});myFirstLine=b("<div>").addClass("lwss-sp-tab-line").appendTo(myBorderTab);myBorderWidth=b("<div>").appendTo(myFirstLine).lwss_4values({icon:"lws-icon-lw_border_width",cssColor:"lwss-tborder-color",property:"border-width"});myBorderColor=b("<div>").appendTo(myFirstLine).lwss_colorButton({icon:"lws-icon-lw_border",cssColor:"lwss-tborder-color",showvalue:true,property:"border-color"});mySecondLine=b("<div>").addClass("lwss-sp-tab-line").appendTo(myBorderTab);myBorderRadius=b("<div>").appendTo(mySecondLine).lwss_4values({icon:"lws-icon-lw_border_radius",cssColor:"lwss-tborder-color",property:"border-radius"});var a=["none","solid","dotted","dashed","double","groove","ridge","inset","outset","initial","inherit","hidden"];myBorderStyle=b("<div>").appendTo(mySecondLine).lwss_select({icon:"lws-icon-lw_border_type",cssColor:"lwss-tborder-color",property:"border-style",values:a})},_addContentTab:function(){myContentSelector=b("<li>").addClass("lwss-sp-tselectors-content lwss_tselector lws-icon-quill").data("Tab","Content").appendTo(this.myTabsSelectors);mySelectorLabel=b("<span>").html("Content").appendTo(myContentSelector);myContentTab=b("<div>").addClass("lwss-sp-tabs-content lwss_sp_tab").data("Tab","Content").appendTo(this.myTabs);myContentSelector.mouseenter(this._bind(this._tSelEnter,this));var a=this;myContentSelector.click(function(){a._setTab(b(this).data("Tab"))});myContentEditor=b("<div>").addClass("lwss-content-widget").appendTo(myContentTab).lwss_text_editor()},_tSelEnter:function(e){var a=b(e.delegateTarget);var f=this;this.element.find(".lwss_tselector").each(function(){if(b(this).data("Tab")==a.data("Tab")){b(this).stop(true,false).animate({width:"100px"},200)}else{b(this).stop(true,false).animate({width:"30px"},200)}})},_tSelLeave:function(d){var a=this;this.element.find(".lwss_tselector").each(function(){if(b(this).data("Tab")==a.activeSelector.data("Tab")){b(this).stop(true,false).animate({width:"100px"},200)}else{b(this).stop(true,false).animate({width:"30px"},200)}})},_setTab:function(d){this.activeTab=d;var a=this;this.element.find(".lwss_tselector").each(function(){if(b(this).data("Tab")==a.activeTab){a.activeSelector=b(this);b(this).width(100)}else{b(this).width(30)}});this.element.find(".lwss_sp_tab").each(function(){if(b(this).data("Tab")==a.activeTab){b(this).show()}else{b(this).hide()}})},setEvent:function(a){this.currentEvent=a;b(".lwss-sp-events").each(function(){b(this).removeClass("active");if(b(this).data("Event")==a){b(this).addClass("active")}});var d=this;if(this.activeClass!=""){d._loadValues();d.stygen.element.find(d.activeClass).each(function(){b(this).removeClass("hovered");b(this).removeClass("focused");var c=d.activeClassValues[d.currentEvent];if(c!=undefined){b(this).css(c)}if(d.currentEvent=="hover"){b(this).addClass("hovered")}if(d.currentEvent=="hover"){b(this).addClass("focused")}})}},_resetValues:function(){if(this.activeClass!=""){var a=this;a.stygen.element.find(a.activeClass).each(function(){b(this).removeClass("hovered");b(this).removeClass("focused")})}this.myEventPanel.show();this.activeClass="";this.activeClassValues=undefined;this.currentEvent="idle";this.element.find(".lwss_value").off("change",this._applyValues);this.element.find(".lwss_value").each(function(){b(this).val(null).trigger("change")});this.element.find(".lwss_value").on("change",this._applyValues)},_applyValues:function(){var a=b(this).closest(".lwss_styling_panel").data("lws-lws_styling_panel");value=b(this).val();property=b(this).data("css");a.activeClassValues[a.currentEvent][property]=value;a.stygen.element.find(a.activeClass).each(function(){b(this).css(a.activeClassValues[a.currentEvent])});a.stygen.placeSelectors();a.stygen.makeCssChain()},_loadValues:function(){var d=this;this.element.find(".lwss_value").off("change",this._applyValues);var a=d.activeClassValues[d.currentEvent];if(a!=undefined){this.element.find(".lwss_value").each(function(){if(a[b(this).data("css")]!=undefined){b(this).val(a[b(this).data("css")]).trigger("change")}})}this.element.find(".lwss_value").on("change",this._applyValues)},openStylingPanel:function(e,a){this._resetValues();this.activeClass=e;var f=e.split(".");this.inputId=a;this.activeClassValues=this.stygen.masterObject[this.activeClass].cssValues;if(this.activeClassValues.hover==undefined&&this.activeClassValues.focus==undefined){this.myEventPanel.hide()}if(jQuery.inArray("lwss_modify",f)!=-1){this.myTabsPanel.find(".lwss-content-widget").lwss_text_editor("setId",this.inputId);this.myTabsPanel.find(".lwss-sp-tselectors-content").show();this._setTab("Content")}else{this.myTabsPanel.find(".lwss-sp-tselectors-content").hide();this._setTab("Text")}this.setEvent("idle");this.stygen.makeCssChain()},resetActiveValues:function(){if(this.activeClass!=""){this.activeClassValues=this.stygen.masterObject[this.activeClass].cssValues;this._loadValues()}}})})(jQuery);